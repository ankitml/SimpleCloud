== Message specification ==

= Common =
Deliver hashlist:
    Notification that a file or directory has been changed
    Sending a list of hashes for zsync matching
    {
        "action" : "deliver_hashes"
        "id" : transaction ID
        "path" : path
        "hashes" : list of (weak,strong) hash tuples
    }
Request blocks:
    Response to "deliver_hashes" containing a list of blocks that the recipient
    should send back
    {
        "action" : "request_blocks"
        "id" : transaction ID
        "block_indexes" : indexes
    }
Deliver blocks:
    Response to "request_blocks" containing a partial or full list of the requested blocks
    {
        "action" : "deliver_blocks"
        "id" : transaction ID
        "blocks" : blocks
    }
Changed:
    Notification for the recipient that sender has finished modifying his local file as requested
    Transaction ID should be the same as the request
    {
        "action" : "modified"
        "id" : transaction ID
        "path" : path
    }

= Client =
Watch:
    Request that the server watch a list of paths. Can be used to alter already watched directory lists.
    Transaction ID should be unique to the sender
    {
        "id" : transaction ID
        "action" : "watch"
        "path" : [list of directories the server should watch]
    }

= Server =
Watching:
    Response to message Watch from the client indicating which of those paths are now watched and which aren"t
    Transaction ID should be the same as the request
    {
        "id" : transaction ID
        "action" : "watching"
        "successful" : [list of paths watched for this client]
        "failed" : [list of paths that failed to be watched]
    }